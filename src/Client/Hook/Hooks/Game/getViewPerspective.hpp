#include "../Hook.hpp"
#include "../../../Events/EventHandler.hpp"
#include "../../../../SDK/SDK.hpp"

class getViewPerspectiveHook : public Hook {

private:
    static int callback(uintptr_t* a1);

public:
    typedef int(__thiscall* original)(uintptr_t*);

    static inline original getViewPerspectiveOriginal = nullptr;

    getViewPerspectiveHook() : Hook("getViewPerspective", "48 83 EC ? 48 8B ? 48 8D ? ? ? 41 B8 ? ? ? ? 48 8B ? ? FF 15 ? ? ? ? 48 8B ? 48 85 ? 74 ? 48 8B ? ? 48 8B ? ? ? ? ? 48 85 ? 74 ? E8 ? ? ? ? 48 83 C4 ? C3 8B 42 ? 48 83 C4 ? C3 E8 ? ? ? ? CC CC CC CC CC 48 83 EC ? 48 8B ? 48 8D ? ? ? 41 B8 ? ? ? ? 48 8B ? ? FF 15 ? ? ? ? 48 8B ? 48 85 ? 74 ? 48 8B ? ? 48 8B ? ? ? ? ? 48 85 ? 74 ? E8 ? ? ? ? 48 83 C4 ? C3 8B 42 ? 48 83 C4 ? C3 E8 ? ? ? ? CC CC CC CC CC 48 83 EC ? 48 8B ? ? ? ? ? 48 33 ? 48 89 ? ? ? 48 8B ? 41 B8 ? ? ? ? 88 54 ? ? 48 8D ? ? ? 48 8B ? ? FF 15 ? ? ? ? 48 8B ? 48 85 ? 74 ? 48 8D ? ? ? E8 ? ? ? ? 48 8B ? ? ? 48 33 ? E8 ? ? ? ? 48 83 C4 ? C3 E8 ? ? ? ? CC CC CC CC CC CC CC CC 48 83 EC ? 48 8B ? 48 8D ? ? ? 41 B8 ? ? ? ? 48 8B ? ? FF 15 ? ? ? ? 48 8B ? 48 85 ? 74 ? 48 8B ? ? 48 8B ? ? ? ? ? 48 85 ? 74 ? E8 ? ? ? ? 48 83 C4 ? C3 0F B6 ? ? 48 83 C4 ? C3 E8 ? ? ? ? CC CC CC CC 40") {}

    void enableHook() override;
};